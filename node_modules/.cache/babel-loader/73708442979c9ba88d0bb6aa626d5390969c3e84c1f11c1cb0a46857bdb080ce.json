{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport { all_routes } from '../router/all_routes';\nimport { useAuth } from '../../context/AuthContext';\nexport const useCoachActions = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    fetchParentPlayers,\n    fetchAllGuardians\n  } = useAuth();\n  const routes = all_routes;\n  const handleCoachClick = async record => {\n    try {\n      // Determine the target ID (use coachId for guardians, fallback to _id)\n      const targetId = record.coachId || record._id;\n\n      // If record is just an ID string, do basic navigation\n      if (typeof record === 'string') {\n        navigate(`${routes.coachDetail}/${record}`);\n        return;\n      }\n\n      // Fetch associated data (players and guardians)\n      const [players, guardians] = await Promise.all([fetchParentPlayers(targetId), fetchAllGuardians(`coachId=${targetId}`)]);\n\n      // Update recently viewed\n      const recentlyViewed = JSON.parse(localStorage.getItem('recentlyViewedCoachs') || '[]');\n      const updatedRecentlyViewed = [targetId, ...recentlyViewed.filter(id => id !== targetId)].slice(0, 5);\n      localStorage.setItem('recentlyViewedCoachs', JSON.stringify(updatedRecentlyViewed));\n\n      // Navigate to the coach detail page\n      navigate(`${routes.parentDetail}/${targetId}`, {\n        state: {\n          coach: {\n            ...record,\n            coachId: targetId,\n            players\n          },\n          guardians,\n          // Include flag if this was a guardian click\n          isGuardianView: !!record.coachId || record.type === 'guardian'\n        }\n      });\n    } catch (err) {\n      console.error('Error in handleCoachClick:', err);\n      // Fallback to basic navigation\n      const targetId = record.coachId || record._id || record;\n      navigate(`${routes.parentDetail}/${targetId}`);\n    }\n  };\n  return {\n    handleCoachClick\n  };\n};\n_s(useCoachActions, \"3ln+y/70w4C1qP7AH7gNghgyyWk=\", false, function () {\n  return [useNavigate, useAuth];\n});","map":{"version":3,"names":["useNavigate","all_routes","useAuth","useCoachActions","_s","navigate","fetchParentPlayers","fetchAllGuardians","routes","handleCoachClick","record","targetId","coachId","_id","coachDetail","players","guardians","Promise","all","recentlyViewed","JSON","parse","localStorage","getItem","updatedRecentlyViewed","filter","id","slice","setItem","stringify","parentDetail","state","coach","isGuardianView","type","err","console","error"],"sources":["/Users/davorins/Desktop/bs/src/feature-module/hooks/useCoachActions.ts"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport { all_routes } from '../router/all_routes';\nimport { useAuth } from '../../context/AuthContext';\n\nexport const useCoachActions = () => {\n  const navigate = useNavigate();\n  const { fetchParentPlayers, fetchAllGuardians } = useAuth();\n  const routes = all_routes;\n\n  const handleCoachClick = async (record: any) => {\n    try {\n      // Determine the target ID (use coachId for guardians, fallback to _id)\n      const targetId = record.coachId || record._id;\n\n      // If record is just an ID string, do basic navigation\n      if (typeof record === 'string') {\n        navigate(`${routes.coachDetail}/${record}`);\n        return;\n      }\n\n      // Fetch associated data (players and guardians)\n      const [players, guardians] = await Promise.all([\n        fetchParentPlayers(targetId),\n        fetchAllGuardians(`coachId=${targetId}`),\n      ]);\n\n      // Update recently viewed\n      const recentlyViewed = JSON.parse(\n        localStorage.getItem('recentlyViewedCoachs') || '[]'\n      );\n      const updatedRecentlyViewed = [\n        targetId,\n        ...recentlyViewed.filter((id: string) => id !== targetId),\n      ].slice(0, 5);\n      localStorage.setItem(\n        'recentlyViewedCoachs',\n        JSON.stringify(updatedRecentlyViewed)\n      );\n\n      // Navigate to the coach detail page\n      navigate(`${routes.parentDetail}/${targetId}`, {\n        state: {\n          coach: {\n            ...record,\n            coachId: targetId,\n            players,\n          },\n          guardians,\n          // Include flag if this was a guardian click\n          isGuardianView: !!record.coachId || record.type === 'guardian',\n        },\n      });\n    } catch (err) {\n      console.error('Error in handleCoachClick:', err);\n      // Fallback to basic navigation\n      const targetId = record.coachId || record._id || record;\n      navigate(`${routes.parentDetail}/${targetId}`);\n    }\n  };\n\n  return { handleCoachClick };\n};\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,OAAO,QAAQ,2BAA2B;AAEnD,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEM,kBAAkB;IAAEC;EAAkB,CAAC,GAAGL,OAAO,CAAC,CAAC;EAC3D,MAAMM,MAAM,GAAGP,UAAU;EAEzB,MAAMQ,gBAAgB,GAAG,MAAOC,MAAW,IAAK;IAC9C,IAAI;MACF;MACA,MAAMC,QAAQ,GAAGD,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACG,GAAG;;MAE7C;MACA,IAAI,OAAOH,MAAM,KAAK,QAAQ,EAAE;QAC9BL,QAAQ,CAAC,GAAGG,MAAM,CAACM,WAAW,IAAIJ,MAAM,EAAE,CAAC;QAC3C;MACF;;MAEA;MACA,MAAM,CAACK,OAAO,EAAEC,SAAS,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC7CZ,kBAAkB,CAACK,QAAQ,CAAC,EAC5BJ,iBAAiB,CAAC,WAAWI,QAAQ,EAAE,CAAC,CACzC,CAAC;;MAEF;MACA,MAAMQ,cAAc,GAAGC,IAAI,CAACC,KAAK,CAC/BC,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC,IAAI,IAClD,CAAC;MACD,MAAMC,qBAAqB,GAAG,CAC5Bb,QAAQ,EACR,GAAGQ,cAAc,CAACM,MAAM,CAAEC,EAAU,IAAKA,EAAE,KAAKf,QAAQ,CAAC,CAC1D,CAACgB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;MACbL,YAAY,CAACM,OAAO,CAClB,sBAAsB,EACtBR,IAAI,CAACS,SAAS,CAACL,qBAAqB,CACtC,CAAC;;MAED;MACAnB,QAAQ,CAAC,GAAGG,MAAM,CAACsB,YAAY,IAAInB,QAAQ,EAAE,EAAE;QAC7CoB,KAAK,EAAE;UACLC,KAAK,EAAE;YACL,GAAGtB,MAAM;YACTE,OAAO,EAAED,QAAQ;YACjBI;UACF,CAAC;UACDC,SAAS;UACT;UACAiB,cAAc,EAAE,CAAC,CAACvB,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACwB,IAAI,KAAK;QACtD;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;MAChD;MACA,MAAMxB,QAAQ,GAAGD,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACG,GAAG,IAAIH,MAAM;MACvDL,QAAQ,CAAC,GAAGG,MAAM,CAACsB,YAAY,IAAInB,QAAQ,EAAE,CAAC;IAChD;EACF,CAAC;EAED,OAAO;IAAEF;EAAiB,CAAC;AAC7B,CAAC;AAACL,EAAA,CAzDWD,eAAe;EAAA,QACTH,WAAW,EACsBE,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}