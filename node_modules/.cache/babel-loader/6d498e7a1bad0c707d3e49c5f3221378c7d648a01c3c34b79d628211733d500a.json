{"ast":null,"code":"var _jsxFileName = \"/Users/davorins/Desktop/bs/src/feature-module/peoples/parent/add-parent/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { all_routes } from '../../../router/all_routes';\nimport ParentForm from './ParentForm';\nimport GuardianForm from './GuardianForm';\nimport NewGuardianForm from './NewGuardianForm';\nimport { formatPhoneNumber, validatePhoneNumber } from '../../../../utils/phone';\nimport { validateEmail, validateRequired, validateName, validateState, validateZipCode } from '../../../../utils/validation';\nimport { ensureAddress } from '../../../../utils/address';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddParent = ({\n  isEdit\n}) => {\n  _s();\n  var _formData$additionalG3;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const parentState = location.state;\n  const fileInputRef = useRef(null);\n  const [avatarPreview, setAvatarPreview] = useState(null);\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [isLoading, setIsLoading] = useState(isEdit);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formData, setFormData] = useState({\n    _id: '',\n    password: '',\n    fullName: '',\n    email: '',\n    phone: '',\n    address: {\n      street: '',\n      street2: '',\n      city: '',\n      state: '',\n      zip: ''\n    },\n    relationship: '',\n    isCoach: false,\n    aauNumber: '',\n    avatar: '',\n    additionalGuardians: []\n  });\n  const [newGuardian, setNewGuardian] = useState({\n    fullName: '',\n    email: '',\n    phone: '',\n    address: {\n      street: '',\n      street2: '',\n      city: '',\n      state: '',\n      zip: ''\n    },\n    relationship: '',\n    aauNumber: '',\n    isCoach: false\n  });\n  const [errors, setErrors] = useState({});\n  const [guardianErrors, setGuardianErrors] = useState({});\n  const [showGuardianForm, setShowGuardianForm] = useState(false);\n  const fetchParentData = async parentId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001'}/api/parent/${parentId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching parent data:', error);\n      throw error;\n    }\n  };\n  const handleAauNumberChange = (e, isGuardian = false, index) => {\n    const value = e.target.value;\n    const hasAauNumber = value.trim().length > 0;\n    if (isGuardian && index !== undefined) {\n      setFormData(prev => {\n        const updatedGuardians = [...(prev.additionalGuardians || [])];\n        updatedGuardians[index] = {\n          ...updatedGuardians[index],\n          aauNumber: value,\n          isCoach: hasAauNumber\n        };\n        return {\n          ...prev,\n          additionalGuardians: updatedGuardians\n        };\n      });\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        aauNumber: value,\n        isCoach: hasAauNumber\n      }));\n    }\n  };\n  useEffect(() => {\n    const loadParentData = async () => {\n      if (!isEdit) {\n        setIsLoading(false);\n        return;\n      }\n      try {\n        var _parentState$parent;\n        let parentData;\n        if (parentState !== null && parentState !== void 0 && parentState.parent) {\n          parentData = parentState.parent;\n          if (!parentData._id) {\n            throw new Error('Parent data missing ID');\n          }\n        } else if (parentState !== null && parentState !== void 0 && (_parentState$parent = parentState.parent) !== null && _parentState$parent !== void 0 && _parentState$parent._id) {\n          var _parentData;\n          parentData = await fetchParentData(parentState.parent._id);\n          if (!((_parentData = parentData) !== null && _parentData !== void 0 && _parentData._id)) {\n            throw new Error('Failed to load parent data');\n          }\n        }\n        if (parentData) {\n          var _parentData$additiona;\n          setFormData({\n            _id: parentData._id,\n            password: '',\n            fullName: parentData.fullName || '',\n            email: parentData.email || '',\n            phone: parentData.phone || '',\n            address: ensureAddress(parentData.address),\n            relationship: parentData.relationship || '',\n            isCoach: parentData.isCoach || false,\n            aauNumber: parentData.aauNumber || '',\n            avatar: parentData.avatar || '',\n            additionalGuardians: ((_parentData$additiona = parentData.additionalGuardians) === null || _parentData$additiona === void 0 ? void 0 : _parentData$additiona.map(g => ({\n              ...g,\n              id: g.id || Date.now().toString(),\n              address: ensureAddress(g.address),\n              isCoach: g.isCoach || false\n            }))) || []\n          });\n          if (parentData.avatar) {\n            setAvatarPreview(parentData.avatar);\n          }\n        } else {\n          throw new Error('No parent data available');\n        }\n      } catch (error) {\n        console.error('Error loading parent data:', error);\n        alert('Failed to load parent data. Redirecting to list...');\n        navigate(all_routes.parentList);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadParentData();\n  }, [isEdit, parentState, navigate]);\n  const handleAvatarChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setAvatarFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setAvatarPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const removeAvatar = () => {\n    setAvatarPreview(null);\n    setAvatarFile(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!validateName(formData.fullName)) {\n      newErrors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n    if (!validateEmail(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n    if (!isEdit && (!formData.password || formData.password.length < 6)) {\n      newErrors.password = 'Password must be at least 6 characters';\n    }\n    if (!validatePhoneNumber(formData.phone)) {\n      newErrors.phone = 'Please enter a valid 10-digit phone number';\n    }\n    if (!validateRequired(formData.relationship)) {\n      newErrors.relationship = 'Relationship to player is required';\n    }\n    const address = formData.address;\n    if (!validateRequired(address.street)) {\n      newErrors['address.street'] = 'Street address is required';\n    }\n    if (!validateRequired(address.city)) {\n      newErrors['address.city'] = 'City is required';\n    }\n    if (!validateState(address.state)) {\n      newErrors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n    if (!validateZipCode(address.zip)) {\n      newErrors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const validateGuardianForm = guardian => {\n    const newErrors = {};\n    if (!validateName(guardian.fullName)) {\n      newErrors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n    if (!validateEmail(guardian.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n    if (!validatePhoneNumber(guardian.phone)) {\n      newErrors.phone = 'Please enter a valid 10-digit phone number';\n    }\n    if (!validateRequired(guardian.relationship)) {\n      newErrors.relationship = 'Relationship to player is required';\n    }\n    if (!validateRequired(guardian.address.street)) {\n      newErrors['address.street'] = 'Street address is required';\n    }\n    if (!validateRequired(guardian.address.city)) {\n      newErrors['address.city'] = 'City is required';\n    }\n    if (!validateState(guardian.address.state)) {\n      newErrors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n    if (!validateZipCode(guardian.address.zip)) {\n      newErrors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n    setGuardianErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const validateExistingGuardians = () => {\n    if (!formData.additionalGuardians) return true;\n    let allValid = true;\n    formData.additionalGuardians.forEach((guardian, index) => {\n      const guardianErrors = validateGuardian(guardian);\n      if (Object.keys(guardianErrors).length > 0) {\n        allValid = false;\n        const guardianCard = document.getElementById(`guardian-${index}`);\n        if (guardianCard) {\n          guardianCard.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center'\n          });\n          guardianCard.classList.add('border-danger');\n          setTimeout(() => {\n            guardianCard.classList.remove('border-danger');\n          }, 3000);\n        }\n      }\n    });\n    return allValid;\n  };\n  const validateGuardian = guardian => {\n    const errors = {};\n    if (!validateName(guardian.fullName)) {\n      errors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n    if (!validateEmail(guardian.email)) {\n      errors.email = 'Please enter a valid email address';\n    }\n    if (!validatePhoneNumber(guardian.phone)) {\n      errors.phone = 'Please enter a valid 10-digit phone number';\n    }\n    if (!validateRequired(guardian.relationship)) {\n      errors.relationship = 'Relationship to player is required';\n    }\n    if (!validateRequired(guardian.address.street)) {\n      errors['address.street'] = 'Street address is required';\n    }\n    if (!validateRequired(guardian.address.city)) {\n      errors['address.city'] = 'City is required';\n    }\n    if (!validateState(guardian.address.state)) {\n      errors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n    if (!validateZipCode(guardian.address.zip)) {\n      errors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n    return errors;\n  };\n  const handleInputChange = e => {\n    const target = e.target;\n    const {\n      name,\n      value\n    } = target;\n    if (name === 'phone') {\n      const formattedPhone = formatPhoneNumber(value.replace(/\\D/g, ''));\n      setFormData(prevData => ({\n        ...prevData,\n        [name]: formattedPhone\n      }));\n      return;\n    }\n    if (name === 'isCoach') {\n      setFormData(prevData => ({\n        ...prevData,\n        [name]: target.checked\n      }));\n      return;\n    }\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = {\n          ...prev\n        };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n  const handleGuardianInputChange = (e, index) => {\n    const target = e.target;\n    const {\n      name,\n      value\n    } = target;\n    if (name === 'phone') {\n      const rawValue = formatPhoneNumber(value.replace(/\\D/g, ''));\n      setFormData(prevData => {\n        const updatedGuardians = [...(prevData.additionalGuardians || [])];\n        updatedGuardians[index] = {\n          ...updatedGuardians[index],\n          [name]: rawValue\n        };\n        return {\n          ...prevData,\n          additionalGuardians: updatedGuardians\n        };\n      });\n      return;\n    }\n    setFormData(prevData => {\n      const updatedGuardians = [...(prevData.additionalGuardians || [])];\n      updatedGuardians[index] = {\n        ...updatedGuardians[index],\n        [name]: value\n      };\n      return {\n        ...prevData,\n        additionalGuardians: updatedGuardians\n      };\n    });\n  };\n  const handleAddressChange = (e, field) => {\n    const {\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      address: {\n        ...prev.address,\n        [field]: value\n      }\n    }));\n    if (errors[`address.${field}`]) {\n      setErrors(prev => {\n        const newErrors = {\n          ...prev\n        };\n        delete newErrors[`address.${field}`];\n        return newErrors;\n      });\n    }\n  };\n  const handleGuardianAddressChange = (e, field, index) => {\n    const {\n      value\n    } = e.target;\n    setFormData(prev => {\n      const updatedGuardians = [...(prev.additionalGuardians || [])];\n      updatedGuardians[index] = {\n        ...updatedGuardians[index],\n        address: {\n          ...updatedGuardians[index].address,\n          [field]: value\n        }\n      };\n      return {\n        ...prev,\n        additionalGuardians: updatedGuardians\n      };\n    });\n  };\n  const addGuardian = () => {\n    if (!validateGuardianForm(newGuardian)) {\n      const firstErrorKey = Object.keys(guardianErrors).find(key => guardianErrors[key]);\n      if (firstErrorKey) {\n        const element = document.querySelector(`[name=\"${firstErrorKey}\"]`);\n        element === null || element === void 0 ? void 0 : element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n      return;\n    }\n    setFormData(prev => ({\n      ...prev,\n      additionalGuardians: [...(prev.additionalGuardians || []), {\n        ...newGuardian,\n        id: Date.now().toString()\n      }]\n    }));\n    setNewGuardian({\n      fullName: '',\n      email: '',\n      phone: '',\n      address: {\n        street: '',\n        street2: '',\n        city: '',\n        state: '',\n        zip: ''\n      },\n      relationship: '',\n      aauNumber: '',\n      isCoach: false\n    });\n    setShowGuardianForm(false);\n    setGuardianErrors({});\n  };\n  const removeGuardian = index => {\n    setFormData(prev => {\n      const updatedGuardians = [...(prev.additionalGuardians || [])];\n      updatedGuardians.splice(index, 1);\n      return {\n        ...prev,\n        additionalGuardians: updatedGuardians\n      };\n    });\n  };\n  const handleSubmit = async e => {\n    var _formData$additionalG;\n    e.preventDefault();\n    if (isSubmitting) return;\n    setIsSubmitting(true);\n    setErrors({});\n\n    // Validate edit mode requirements\n    if (isEdit && (!formData._id || typeof formData._id !== 'string')) {\n      alert('Invalid parent ID. Please refresh and try again.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate form data\n    if (!validateForm()) {\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate guardians if present\n    if ((_formData$additionalG = formData.additionalGuardians) !== null && _formData$additionalG !== void 0 && _formData$additionalG.length && !validateExistingGuardians()) {\n      alert('Please fix all guardian errors before submitting');\n      setIsSubmitting(false);\n      return;\n    }\n    try {\n      var _formData$aauNumber, _formData$password, _formData$additionalG2;\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error('Authentication token missing');\n      const baseUrl = process.env.REACT_APP_API_BASE_URL;\n      const endpoint = isEdit ? `/parent-full/${formData._id}` : '/register';\n      const url = `${baseUrl}${endpoint}`;\n\n      // Build payload with proper typing\n      const payload = {\n        fullName: formData.fullName.trim(),\n        email: formData.email.trim().toLowerCase(),\n        phone: formData.phone.replace(/\\D/g, ''),\n        relationship: formData.relationship.trim(),\n        isCoach: formData.isCoach,\n        aauNumber: ((_formData$aauNumber = formData.aauNumber) === null || _formData$aauNumber === void 0 ? void 0 : _formData$aauNumber.trim()) || '',\n        address: {\n          street: formData.address.street.trim(),\n          ...(formData.address.street2 && {\n            street2: formData.address.street2.trim()\n          }),\n          city: formData.address.city.trim(),\n          state: formData.address.state.trim().toUpperCase(),\n          zip: formData.address.zip.trim()\n        },\n        ...(!isEdit && {\n          password: ((_formData$password = formData.password) === null || _formData$password === void 0 ? void 0 : _formData$password.trim()) || '',\n          registerType: 'adminCreate',\n          agreeToTerms: true\n        }),\n        ...(((_formData$additionalG2 = formData.additionalGuardians) === null || _formData$additionalG2 === void 0 ? void 0 : _formData$additionalG2.length) && {\n          additionalGuardians: formData.additionalGuardians.map(g => {\n            var _g$aauNumber;\n            return {\n              fullName: g.fullName.trim(),\n              email: g.email.trim().toLowerCase(),\n              phone: g.phone.replace(/\\D/g, ''),\n              relationship: g.relationship.trim(),\n              aauNumber: ((_g$aauNumber = g.aauNumber) === null || _g$aauNumber === void 0 ? void 0 : _g$aauNumber.trim()) || '',\n              isCoach: g.isCoach || false,\n              address: {\n                street: g.address.street.trim(),\n                ...(g.address.street2 && {\n                  street2: g.address.street2.trim()\n                }),\n                city: g.address.city.trim(),\n                state: g.address.state.trim().toUpperCase(),\n                zip: g.address.zip.trim()\n              }\n            };\n          })\n        }),\n        ...(isEdit && formData.avatar && {\n          avatarUrl: formData.avatar\n        })\n      };\n      console.log('Submitting payload:', payload);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          ...(avatarFile && isEdit ? {} : {\n            'Content-Type': 'application/json'\n          })\n        },\n        timeout: 10000\n      };\n\n      // Make the request\n      const response = avatarFile && isEdit ? await axios.put(url, createFormData(payload, avatarFile), config) : await axios[isEdit ? 'put' : 'post'](url, payload, config);\n\n      // Handle response\n      if (!response.data) {\n        throw new Error('Empty response from server');\n      }\n      const parentData = response.data.parent || response.data;\n      const parentId = parentData._id || response.data._id;\n      if (!parentId) {\n        throw new Error('Invalid parent ID in response');\n      }\n\n      // Navigate to parent detail\n      navigate(`${all_routes.parentDetail}/${parentId}`, {\n        state: {\n          parent: parentData,\n          guardians: parentData.additionalGuardians || [],\n          players: (parentState === null || parentState === void 0 ? void 0 : parentState.players) || [],\n          ...(!isEdit && {\n            newAccount: true,\n            ...(response.data.temporaryPassword && {\n              temporaryPassword: response.data.temporaryPassword\n            })\n          })\n        },\n        replace: true\n      });\n    } catch (error) {\n      console.error('Submission error:', error);\n      let errorMessage = 'Submission failed. Please try again.';\n      if (axios.isAxiosError(error)) {\n        var _error$response, _error$response2, _error$response3, _error$response4, _error$response5;\n        console.error('Error details:', {\n          status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n          data: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data,\n          config: error.config\n        });\n\n        // Handle different error cases\n        if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n          errorMessage = 'Session expired. Please log in again.';\n        } else if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 400) {\n          var _error$response$data, _error$response$data2;\n          errorMessage = ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || 'Invalid data submitted';\n        } else if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 500) {\n          errorMessage = 'Server error. Please try again later.';\n        }\n      } else if (error instanceof Error) {\n        errorMessage = error.message;\n      }\n      alert(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // FormData helper\n  const createFormData = (data, file) => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    formData.append('data', JSON.stringify(data));\n    return formData;\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content content-two\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center align-items-center\",\n          style: {\n            height: '80vh'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content content-two\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-md-flex d-block align-items-center justify-content-between mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(ParentForm, {\n              formData: formData,\n              errors: errors,\n              avatarPreview: avatarPreview,\n              fileInputRef: fileInputRef,\n              handleInputChange: handleInputChange,\n              handleAddressChange: handleAddressChange,\n              handleAvatarChange: handleAvatarChange,\n              removeAvatar: removeAvatar,\n              handleAauNumberChange: e => handleAauNumberChange(e),\n              isEdit: isEdit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 712,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header bg-light\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"bg-white avatar avatar-sm me-2 text-gray-7 flex-shrink-0\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"ti ti-users fs-16\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 730,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 729,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-dark\",\n                      children: \"Additional Parents/Guardians\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 732,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 728,\n                    columnNumber: 21\n                  }, this), (!formData.additionalGuardians || formData.additionalGuardians.length === 0) && !showGuardianForm && /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-primary btn-sm\",\n                    onClick: () => setShowGuardianForm(true),\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"ti ti-plus me-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 744,\n                      columnNumber: 27\n                    }, this), \" Add Parent\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 739,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 727,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [(!formData.additionalGuardians || formData.additionalGuardians.length === 0) && !showGuardianForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-3\",\n                  children: \"No guardians currently listed. Please add at least one parent/guardian.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 753,\n                  columnNumber: 23\n                }, this), (_formData$additionalG3 = formData.additionalGuardians) === null || _formData$additionalG3 === void 0 ? void 0 : _formData$additionalG3.map((guardian, index) => /*#__PURE__*/_jsxDEV(GuardianForm, {\n                  guardian: guardian,\n                  index: index,\n                  handleGuardianInputChange: handleGuardianInputChange,\n                  handleGuardianAddressChange: handleGuardianAddressChange,\n                  removeGuardian: removeGuardian,\n                  handleAauNumberChange: handleAauNumberChange\n                }, guardian.id || index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 21\n                }, this)), showGuardianForm && /*#__PURE__*/_jsxDEV(NewGuardianForm, {\n                  newGuardian: newGuardian,\n                  guardianErrors: guardianErrors,\n                  setNewGuardian: setNewGuardian,\n                  setGuardianErrors: setGuardianErrors,\n                  setShowGuardianForm: setShowGuardianForm,\n                  addGuardian: () => {\n                    addGuardian();\n                    setShowGuardianForm(false);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 772,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-end mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-light me-3\",\n                onClick: () => window.history.back(),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                disabled: isSubmitting,\n                children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm me-1\",\n                    role: \"status\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 802,\n                    columnNumber: 23\n                  }, this), isEdit ? 'Updating...' : 'Adding...']\n                }, void 0, true) : isEdit ? 'Update' : 'Add'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 795,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 704,\n    columnNumber: 5\n  }, this);\n};\n_s(AddParent, \"LE5CfDdlON7MHtVJ4F0JSzuP0C0=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AddParent;\nexport default AddParent;\nvar _c;\n$RefreshReg$(_c, \"AddParent\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","useNavigate","axios","all_routes","ParentForm","GuardianForm","NewGuardianForm","formatPhoneNumber","validatePhoneNumber","validateEmail","validateRequired","validateName","validateState","validateZipCode","ensureAddress","jsxDEV","_jsxDEV","Fragment","_Fragment","AddParent","isEdit","_s","_formData$additionalG3","location","navigate","parentState","state","fileInputRef","avatarPreview","setAvatarPreview","avatarFile","setAvatarFile","isLoading","setIsLoading","isSubmitting","setIsSubmitting","formData","setFormData","_id","password","fullName","email","phone","address","street","street2","city","zip","relationship","isCoach","aauNumber","avatar","additionalGuardians","newGuardian","setNewGuardian","errors","setErrors","guardianErrors","setGuardianErrors","showGuardianForm","setShowGuardianForm","fetchParentData","parentId","token","localStorage","getItem","response","get","process","env","REACT_APP_API_BASE_URL","headers","Authorization","data","error","console","handleAauNumberChange","e","isGuardian","index","value","target","hasAauNumber","trim","length","undefined","prev","updatedGuardians","loadParentData","_parentState$parent","parentData","parent","Error","_parentData","_parentData$additiona","map","g","id","Date","now","toString","alert","parentList","handleAvatarChange","files","file","reader","FileReader","onloadend","result","readAsDataURL","removeAvatar","current","validateForm","newErrors","Object","keys","validateGuardianForm","guardian","validateExistingGuardians","allValid","forEach","validateGuardian","guardianCard","document","getElementById","scrollIntoView","behavior","block","classList","add","setTimeout","remove","handleInputChange","name","formattedPhone","replace","prevData","checked","handleGuardianInputChange","rawValue","handleAddressChange","field","handleGuardianAddressChange","addGuardian","firstErrorKey","find","key","element","querySelector","removeGuardian","splice","handleSubmit","_formData$additionalG","preventDefault","_formData$aauNumber","_formData$password","_formData$additionalG2","baseUrl","endpoint","url","payload","toLowerCase","toUpperCase","registerType","agreeToTerms","_g$aauNumber","avatarUrl","log","config","timeout","put","createFormData","parentDetail","guardians","players","newAccount","temporaryPassword","errorMessage","isAxiosError","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","status","_error$response$data","_error$response$data2","message","FormData","append","JSON","stringify","className","children","style","height","role","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onClick","window","history","back","disabled","_c","$RefreshReg$"],"sources":["/Users/davorins/Desktop/bs/src/feature-module/peoples/parent/add-parent/index.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios, { AxiosRequestConfig } from 'axios';\nimport { all_routes } from '../../../router/all_routes';\nimport ParentForm from './ParentForm';\nimport GuardianForm from './GuardianForm';\nimport NewGuardianForm from './NewGuardianForm';\nimport {\n  formatPhoneNumber,\n  validatePhoneNumber,\n} from '../../../../utils/phone';\nimport {\n  validateEmail,\n  validateRequired,\n  validateName,\n  validateState,\n  validateZipCode,\n} from '../../../../utils/validation';\nimport { Address, ensureAddress } from '../../../../utils/address';\nimport {\n  ParentFormData,\n  GuardianFormData,\n  ValidationErrors,\n  ParentState,\n  Guardian,\n} from '../../../../types/types';\n\nconst AddParent = ({ isEdit }: { isEdit: boolean }) => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const parentState = location.state as ParentState | undefined;\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [avatarPreview, setAvatarPreview] = useState<string | null>(null);\n  const [avatarFile, setAvatarFile] = useState<File | null>(null);\n  const [isLoading, setIsLoading] = useState(isEdit);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const [formData, setFormData] = useState<ParentFormData>({\n    _id: '',\n    password: '',\n    fullName: '',\n    email: '',\n    phone: '',\n    address: {\n      street: '',\n      street2: '',\n      city: '',\n      state: '',\n      zip: '',\n    },\n    relationship: '',\n    isCoach: false,\n    aauNumber: '',\n    avatar: '',\n    additionalGuardians: [],\n  });\n\n  const [newGuardian, setNewGuardian] = useState<GuardianFormData>({\n    fullName: '',\n    email: '',\n    phone: '',\n    address: {\n      street: '',\n      street2: '',\n      city: '',\n      state: '',\n      zip: '',\n    },\n    relationship: '',\n    aauNumber: '',\n    isCoach: false,\n  });\n\n  const [errors, setErrors] = useState<ValidationErrors>({});\n  const [guardianErrors, setGuardianErrors] = useState<ValidationErrors>({});\n  const [showGuardianForm, setShowGuardianForm] = useState(false);\n\n  const fetchParentData = async (parentId: string) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(\n        `${\n          process.env.REACT_APP_API_BASE_URL || 'http://localhost:5001'\n        }/api/parent/${parentId}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching parent data:', error);\n      throw error;\n    }\n  };\n\n  const handleAauNumberChange = (\n    e: React.ChangeEvent<HTMLInputElement>,\n    isGuardian: boolean = false,\n    index?: number\n  ) => {\n    const value = e.target.value;\n    const hasAauNumber = value.trim().length > 0;\n\n    if (isGuardian && index !== undefined) {\n      setFormData((prev) => {\n        const updatedGuardians = [...(prev.additionalGuardians || [])];\n        updatedGuardians[index] = {\n          ...updatedGuardians[index],\n          aauNumber: value,\n          isCoach: hasAauNumber,\n        };\n        return {\n          ...prev,\n          additionalGuardians: updatedGuardians,\n        };\n      });\n    } else {\n      setFormData((prev) => ({\n        ...prev,\n        aauNumber: value,\n        isCoach: hasAauNumber,\n      }));\n    }\n  };\n\n  useEffect(() => {\n    const loadParentData = async () => {\n      if (!isEdit) {\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        let parentData;\n\n        if (parentState?.parent) {\n          parentData = parentState.parent;\n          if (!parentData._id) {\n            throw new Error('Parent data missing ID');\n          }\n        } else if (parentState?.parent?._id) {\n          parentData = await fetchParentData(parentState.parent._id);\n          if (!parentData?._id) {\n            throw new Error('Failed to load parent data');\n          }\n        }\n\n        if (parentData) {\n          setFormData({\n            _id: parentData._id,\n            password: '',\n            fullName: parentData.fullName || '',\n            email: parentData.email || '',\n            phone: parentData.phone || '',\n            address: ensureAddress(parentData.address),\n            relationship: parentData.relationship || '',\n            isCoach: parentData.isCoach || false,\n            aauNumber: parentData.aauNumber || '',\n            avatar: parentData.avatar || '',\n            additionalGuardians:\n              parentData.additionalGuardians?.map((g: Guardian) => ({\n                ...g,\n                id: g.id || Date.now().toString(),\n                address: ensureAddress(g.address),\n                isCoach: g.isCoach || false,\n              })) || [],\n          });\n\n          if (parentData.avatar) {\n            setAvatarPreview(parentData.avatar);\n          }\n        } else {\n          throw new Error('No parent data available');\n        }\n      } catch (error) {\n        console.error('Error loading parent data:', error);\n        alert('Failed to load parent data. Redirecting to list...');\n        navigate(all_routes.parentList);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadParentData();\n  }, [isEdit, parentState, navigate]);\n\n  const handleAvatarChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setAvatarFile(file);\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setAvatarPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const removeAvatar = () => {\n    setAvatarPreview(null);\n    setAvatarFile(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: ValidationErrors = {};\n\n    if (!validateName(formData.fullName)) {\n      newErrors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n\n    if (!validateEmail(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    if (!isEdit && (!formData.password || formData.password.length < 6)) {\n      newErrors.password = 'Password must be at least 6 characters';\n    }\n\n    if (!validatePhoneNumber(formData.phone)) {\n      newErrors.phone = 'Please enter a valid 10-digit phone number';\n    }\n\n    if (!validateRequired(formData.relationship)) {\n      newErrors.relationship = 'Relationship to player is required';\n    }\n\n    const address = formData.address;\n    if (!validateRequired(address.street)) {\n      newErrors['address.street'] = 'Street address is required';\n    }\n\n    if (!validateRequired(address.city)) {\n      newErrors['address.city'] = 'City is required';\n    }\n\n    if (!validateState(address.state)) {\n      newErrors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n\n    if (!validateZipCode(address.zip)) {\n      newErrors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateGuardianForm = (guardian: GuardianFormData): boolean => {\n    const newErrors: ValidationErrors = {};\n\n    if (!validateName(guardian.fullName)) {\n      newErrors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n\n    if (!validateEmail(guardian.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    if (!validatePhoneNumber(guardian.phone)) {\n      newErrors.phone = 'Please enter a valid 10-digit phone number';\n    }\n\n    if (!validateRequired(guardian.relationship)) {\n      newErrors.relationship = 'Relationship to player is required';\n    }\n\n    if (!validateRequired(guardian.address.street)) {\n      newErrors['address.street'] = 'Street address is required';\n    }\n\n    if (!validateRequired(guardian.address.city)) {\n      newErrors['address.city'] = 'City is required';\n    }\n\n    if (!validateState(guardian.address.state)) {\n      newErrors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n\n    if (!validateZipCode(guardian.address.zip)) {\n      newErrors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n\n    setGuardianErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateExistingGuardians = (): boolean => {\n    if (!formData.additionalGuardians) return true;\n\n    let allValid = true;\n    formData.additionalGuardians.forEach((guardian, index) => {\n      const guardianErrors = validateGuardian(guardian);\n      if (Object.keys(guardianErrors).length > 0) {\n        allValid = false;\n        const guardianCard = document.getElementById(`guardian-${index}`);\n        if (guardianCard) {\n          guardianCard.scrollIntoView({ behavior: 'smooth', block: 'center' });\n          guardianCard.classList.add('border-danger');\n          setTimeout(() => {\n            guardianCard.classList.remove('border-danger');\n          }, 3000);\n        }\n      }\n    });\n\n    return allValid;\n  };\n\n  const validateGuardian = (guardian: GuardianFormData): ValidationErrors => {\n    const errors: ValidationErrors = {};\n\n    if (!validateName(guardian.fullName)) {\n      errors.fullName = 'Please enter a valid name (min 2 characters)';\n    }\n\n    if (!validateEmail(guardian.email)) {\n      errors.email = 'Please enter a valid email address';\n    }\n\n    if (!validatePhoneNumber(guardian.phone)) {\n      errors.phone = 'Please enter a valid 10-digit phone number';\n    }\n\n    if (!validateRequired(guardian.relationship)) {\n      errors.relationship = 'Relationship to player is required';\n    }\n\n    if (!validateRequired(guardian.address.street)) {\n      errors['address.street'] = 'Street address is required';\n    }\n\n    if (!validateRequired(guardian.address.city)) {\n      errors['address.city'] = 'City is required';\n    }\n\n    if (!validateState(guardian.address.state)) {\n      errors['address.state'] = 'Please enter a valid 2-letter state code';\n    }\n\n    if (!validateZipCode(guardian.address.zip)) {\n      errors['address.zip'] = 'Please enter a valid ZIP code';\n    }\n\n    return errors;\n  };\n\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const target = e.target as HTMLInputElement;\n    const { name, value } = target;\n\n    if (name === 'phone') {\n      const formattedPhone = formatPhoneNumber(value.replace(/\\D/g, ''));\n      setFormData((prevData) => ({\n        ...prevData,\n        [name]: formattedPhone,\n      }));\n      return;\n    }\n\n    if (name === 'isCoach') {\n      setFormData((prevData) => ({\n        ...prevData,\n        [name]: (target as HTMLInputElement).checked,\n      }));\n      return;\n    }\n\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n\n    if (errors[name]) {\n      setErrors((prev) => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  const handleGuardianInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>,\n    index: number\n  ) => {\n    const target = e.target as HTMLInputElement;\n    const { name, value } = target;\n\n    if (name === 'phone') {\n      const rawValue = formatPhoneNumber(value.replace(/\\D/g, ''));\n      setFormData((prevData) => {\n        const updatedGuardians = [...(prevData.additionalGuardians || [])];\n        updatedGuardians[index] = {\n          ...updatedGuardians[index],\n          [name]: rawValue,\n        };\n        return {\n          ...prevData,\n          additionalGuardians: updatedGuardians,\n        };\n      });\n      return;\n    }\n\n    setFormData((prevData) => {\n      const updatedGuardians = [...(prevData.additionalGuardians || [])];\n      updatedGuardians[index] = {\n        ...updatedGuardians[index],\n        [name]: value,\n      };\n      return {\n        ...prevData,\n        additionalGuardians: updatedGuardians,\n      };\n    });\n  };\n\n  const handleAddressChange = (\n    e: React.ChangeEvent<HTMLInputElement>,\n    field: keyof Address\n  ) => {\n    const { value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      address: {\n        ...prev.address,\n        [field]: value,\n      },\n    }));\n\n    if (errors[`address.${field}`]) {\n      setErrors((prev) => {\n        const newErrors = { ...prev };\n        delete newErrors[`address.${field}`];\n        return newErrors;\n      });\n    }\n  };\n\n  const handleGuardianAddressChange = (\n    e: React.ChangeEvent<HTMLInputElement>,\n    field: keyof Address,\n    index: number\n  ) => {\n    const { value } = e.target;\n    setFormData((prev) => {\n      const updatedGuardians = [...(prev.additionalGuardians || [])];\n      updatedGuardians[index] = {\n        ...updatedGuardians[index],\n        address: {\n          ...updatedGuardians[index].address,\n          [field]: value,\n        },\n      };\n      return {\n        ...prev,\n        additionalGuardians: updatedGuardians,\n      };\n    });\n  };\n\n  const addGuardian = () => {\n    if (!validateGuardianForm(newGuardian)) {\n      const firstErrorKey = Object.keys(guardianErrors).find(\n        (key) => guardianErrors[key]\n      );\n      if (firstErrorKey) {\n        const element = document.querySelector(`[name=\"${firstErrorKey}\"]`);\n        element?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n      return;\n    }\n\n    setFormData((prev) => ({\n      ...prev,\n      additionalGuardians: [\n        ...(prev.additionalGuardians || []),\n        {\n          ...newGuardian,\n          id: Date.now().toString(),\n        },\n      ],\n    }));\n\n    setNewGuardian({\n      fullName: '',\n      email: '',\n      phone: '',\n      address: {\n        street: '',\n        street2: '',\n        city: '',\n        state: '',\n        zip: '',\n      },\n      relationship: '',\n      aauNumber: '',\n      isCoach: false,\n    });\n\n    setShowGuardianForm(false);\n    setGuardianErrors({});\n  };\n\n  const removeGuardian = (index: number) => {\n    setFormData((prev) => {\n      const updatedGuardians = [...(prev.additionalGuardians || [])];\n      updatedGuardians.splice(index, 1);\n      return {\n        ...prev,\n        additionalGuardians: updatedGuardians,\n      };\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (isSubmitting) return;\n\n    setIsSubmitting(true);\n    setErrors({});\n\n    // Validate edit mode requirements\n    if (isEdit && (!formData._id || typeof formData._id !== 'string')) {\n      alert('Invalid parent ID. Please refresh and try again.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate form data\n    if (!validateForm()) {\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate guardians if present\n    if (formData.additionalGuardians?.length && !validateExistingGuardians()) {\n      alert('Please fix all guardian errors before submitting');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error('Authentication token missing');\n\n      const baseUrl = process.env.REACT_APP_API_BASE_URL;\n      const endpoint = isEdit ? `/parent-full/${formData._id}` : '/register';\n      const url = `${baseUrl}${endpoint}`;\n\n      // Build payload with proper typing\n      const payload = {\n        fullName: formData.fullName.trim(),\n        email: formData.email.trim().toLowerCase(),\n        phone: formData.phone.replace(/\\D/g, ''),\n        relationship: formData.relationship.trim(),\n        isCoach: formData.isCoach,\n        aauNumber: formData.aauNumber?.trim() || '',\n        address: {\n          street: formData.address.street.trim(),\n          ...(formData.address.street2 && {\n            street2: formData.address.street2.trim(),\n          }),\n          city: formData.address.city.trim(),\n          state: formData.address.state.trim().toUpperCase(),\n          zip: formData.address.zip.trim(),\n        },\n        ...(!isEdit && {\n          password: formData.password?.trim() || '',\n          registerType: 'adminCreate',\n          agreeToTerms: true,\n        }),\n        ...(formData.additionalGuardians?.length && {\n          additionalGuardians: formData.additionalGuardians.map((g) => ({\n            fullName: g.fullName.trim(),\n            email: g.email.trim().toLowerCase(),\n            phone: g.phone.replace(/\\D/g, ''),\n            relationship: g.relationship.trim(),\n            aauNumber: g.aauNumber?.trim() || '',\n            isCoach: g.isCoach || false,\n            address: {\n              street: g.address.street.trim(),\n              ...(g.address.street2 && { street2: g.address.street2.trim() }),\n              city: g.address.city.trim(),\n              state: g.address.state.trim().toUpperCase(),\n              zip: g.address.zip.trim(),\n            },\n          })),\n        }),\n        ...(isEdit && formData.avatar && { avatarUrl: formData.avatar }),\n      };\n\n      console.log('Submitting payload:', payload);\n\n      const config: AxiosRequestConfig = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          ...(avatarFile && isEdit\n            ? {}\n            : { 'Content-Type': 'application/json' }),\n        },\n        timeout: 10000,\n      };\n\n      // Make the request\n      const response =\n        avatarFile && isEdit\n          ? await axios.put(url, createFormData(payload, avatarFile), config)\n          : await axios[isEdit ? 'put' : 'post'](url, payload, config);\n\n      // Handle response\n      if (!response.data) {\n        throw new Error('Empty response from server');\n      }\n\n      const parentData = response.data.parent || response.data;\n      const parentId = parentData._id || response.data._id;\n\n      if (!parentId) {\n        throw new Error('Invalid parent ID in response');\n      }\n\n      // Navigate to parent detail\n      navigate(`${all_routes.parentDetail}/${parentId}`, {\n        state: {\n          parent: parentData,\n          guardians: parentData.additionalGuardians || [],\n          players: parentState?.players || [],\n          ...(!isEdit && {\n            newAccount: true,\n            ...(response.data.temporaryPassword && {\n              temporaryPassword: response.data.temporaryPassword,\n            }),\n          }),\n        },\n        replace: true,\n      });\n    } catch (error) {\n      console.error('Submission error:', error);\n\n      let errorMessage = 'Submission failed. Please try again.';\n\n      if (axios.isAxiosError(error)) {\n        console.error('Error details:', {\n          status: error.response?.status,\n          data: error.response?.data,\n          config: error.config,\n        });\n\n        // Handle different error cases\n        if (error.response?.status === 401) {\n          errorMessage = 'Session expired. Please log in again.';\n        } else if (error.response?.status === 400) {\n          errorMessage =\n            error.response.data?.error ||\n            error.response.data?.message ||\n            'Invalid data submitted';\n        } else if (error.response?.status === 500) {\n          errorMessage = 'Server error. Please try again later.';\n        }\n      } else if (error instanceof Error) {\n        errorMessage = error.message;\n      }\n\n      alert(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // FormData helper\n  const createFormData = (data: object, file: File): FormData => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    formData.append('data', JSON.stringify(data));\n    return formData;\n  };\n\n  if (isLoading) {\n    return (\n      <div className='page-wrapper'>\n        <div className='content content-two'>\n          <div\n            className='d-flex justify-content-center align-items-center'\n            style={{ height: '80vh' }}\n          >\n            <div className='spinner-border text-primary' role='status'>\n              <span className='visually-hidden'>Loading...</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='page-wrapper'>\n      <div className='content content-two'>\n        <div className='d-md-flex d-block align-items-center justify-content-between mb-3'>\n          {/* Breadcrumb navigation would go here */}\n        </div>\n        <div className='row'>\n          <div className='col-md-12'>\n            <form onSubmit={handleSubmit}>\n              <ParentForm\n                formData={formData}\n                errors={errors}\n                avatarPreview={avatarPreview}\n                fileInputRef={fileInputRef}\n                handleInputChange={handleInputChange}\n                handleAddressChange={handleAddressChange}\n                handleAvatarChange={handleAvatarChange}\n                removeAvatar={removeAvatar}\n                handleAauNumberChange={(e) => handleAauNumberChange(e)}\n                isEdit={isEdit}\n              />\n\n              <div className='card mt-4'>\n                <div className='card-header bg-light'>\n                  <div className='d-flex align-items-center justify-content-between'>\n                    <div className='d-flex align-items-center'>\n                      <span className='bg-white avatar avatar-sm me-2 text-gray-7 flex-shrink-0'>\n                        <i className='ti ti-users fs-16' />\n                      </span>\n                      <h4 className='text-dark'>\n                        Additional Parents/Guardians\n                      </h4>\n                    </div>\n                    {(!formData.additionalGuardians ||\n                      formData.additionalGuardians.length === 0) &&\n                      !showGuardianForm && (\n                        <button\n                          type='button'\n                          className='btn btn-primary btn-sm'\n                          onClick={() => setShowGuardianForm(true)}\n                        >\n                          <i className='ti ti-plus me-1' /> Add Parent\n                        </button>\n                      )}\n                  </div>\n                </div>\n                <div className='card-body'>\n                  {(!formData.additionalGuardians ||\n                    formData.additionalGuardians.length === 0) &&\n                    !showGuardianForm && (\n                      <div className='mb-3'>\n                        No guardians currently listed. Please add at least one\n                        parent/guardian.\n                      </div>\n                    )}\n\n                  {formData.additionalGuardians?.map((guardian, index) => (\n                    <GuardianForm\n                      key={guardian.id || index}\n                      guardian={guardian}\n                      index={index}\n                      handleGuardianInputChange={handleGuardianInputChange}\n                      handleGuardianAddressChange={handleGuardianAddressChange}\n                      removeGuardian={removeGuardian}\n                      handleAauNumberChange={handleAauNumberChange}\n                    />\n                  ))}\n\n                  {showGuardianForm && (\n                    <NewGuardianForm\n                      newGuardian={newGuardian}\n                      guardianErrors={guardianErrors}\n                      setNewGuardian={setNewGuardian}\n                      setGuardianErrors={setGuardianErrors}\n                      setShowGuardianForm={setShowGuardianForm}\n                      addGuardian={() => {\n                        addGuardian();\n                        setShowGuardianForm(false);\n                      }}\n                    />\n                  )}\n                </div>\n              </div>\n\n              <div className='text-end mt-4'>\n                <button\n                  type='button'\n                  className='btn btn-light me-3'\n                  onClick={() => window.history.back()}\n                >\n                  Cancel\n                </button>\n                <button\n                  type='submit'\n                  className='btn btn-primary'\n                  disabled={isSubmitting}\n                >\n                  {isSubmitting ? (\n                    <>\n                      <span\n                        className='spinner-border spinner-border-sm me-1'\n                        role='status'\n                        aria-hidden='true'\n                      ></span>\n                      {isEdit ? 'Updating...' : 'Adding...'}\n                    </>\n                  ) : isEdit ? (\n                    'Update'\n                  ) : (\n                    'Add'\n                  )}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddParent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}