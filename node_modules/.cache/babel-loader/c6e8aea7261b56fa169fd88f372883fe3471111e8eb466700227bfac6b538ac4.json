{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useAuth } from '../../context/AuthContext';\nimport { useState, useEffect, useCallback } from 'react';\nexport const useCoachData = () => {\n  _s();\n  const {\n    parents,\n    fetchParentsData,\n    currentUser\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [coaches, setCoaches] = useState([]);\n  const transformToExtendedRecord = useCallback(coach => ({\n    ...coach,\n    _id: coach._id,\n    fullName: coach.fullName,\n    email: coach.email,\n    phone: coach.phone,\n    address: coach.address,\n    type: 'coach',\n    DateofJoin: coach.createdAt || new Date().toISOString(),\n    imgSrc: coach.avatar || 'assets/img/profiles/coach-avatar.jpg',\n    canView: true,\n    status: coach.status || 'Active',\n    aauNumber: coach.aauNumber || 'N/A',\n    role: coach.role || 'coach',\n    players: coach.players || [],\n    isCoach: true,\n    createdAt: coach.createdAt || new Date().toISOString()\n  }), []);\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      if (!currentUser) {\n        setError('No user data found.');\n        return;\n      }\n      if (!parents || parents.length === 0) {\n        await fetchParentsData();\n      }\n      const coachData = parents.filter(parent => parent.isCoach).map(parent => ({\n        ...parent,\n        isCoach: true,\n        aauNumber: parent.aauNumber || 'N/A',\n        role: parent.role || 'coach',\n        players: parent.players || [],\n        createdAt: parent.createdAt || new Date().toISOString()\n      }));\n      setCoaches(coachData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch coach data');\n      console.error('Error fetching coach data:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentUser, parents, fetchParentsData]);\n  useEffect(() => {\n    if (coaches.length === 0) {\n      fetchData();\n    }\n  }, [fetchData, coaches.length]);\n  return {\n    loading,\n    error,\n    coaches,\n    coachData: coaches.map(transformToExtendedRecord),\n    fetchData\n  };\n};\n_s(useCoachData, \"cHXbiMG+lHIWR2ympo7diyzOVTk=\", false, function () {\n  return [useAuth];\n});","map":{"version":3,"names":["useAuth","useState","useEffect","useCallback","useCoachData","_s","parents","fetchParentsData","currentUser","loading","setLoading","error","setError","coaches","setCoaches","transformToExtendedRecord","coach","_id","fullName","email","phone","address","type","DateofJoin","createdAt","Date","toISOString","imgSrc","avatar","canView","status","aauNumber","role","players","isCoach","fetchData","length","coachData","filter","parent","map","err","Error","message","console"],"sources":["/Users/davorins/Desktop/bs/src/feature-module/hooks/useCoachData.ts"],"sourcesContent":["import { useAuth } from '../../context/AuthContext';\nimport { useState, useEffect, useCallback } from 'react';\nimport { Coach } from '../../types/coachTypes';\nimport { ExtendedCoachRecord } from '../../utils/coachUtils';\n\nexport const useCoachData = () => {\n  const { parents, fetchParentsData, currentUser } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [coaches, setCoaches] = useState<Coach[]>([]);\n\n  const transformToExtendedRecord = useCallback(\n    (coach: Coach): ExtendedCoachRecord => ({\n      ...coach,\n      _id: coach._id,\n      fullName: coach.fullName,\n      email: coach.email,\n      phone: coach.phone,\n      address: coach.address,\n      type: 'coach' as const,\n      DateofJoin: coach.createdAt || new Date().toISOString(),\n      imgSrc: coach.avatar || 'assets/img/profiles/coach-avatar.jpg',\n      canView: true,\n      status: coach.status || 'Active',\n      aauNumber: coach.aauNumber || 'N/A',\n      role: coach.role || 'coach',\n      players: coach.players || [],\n      isCoach: true,\n      createdAt: coach.createdAt || new Date().toISOString(),\n    }),\n    []\n  );\n\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      if (!currentUser) {\n        setError('No user data found.');\n        return;\n      }\n\n      if (!parents || parents.length === 0) {\n        await fetchParentsData();\n      }\n\n      const coachData = parents\n        .filter((parent) => parent.isCoach)\n        .map(\n          (parent): Coach => ({\n            ...parent,\n            isCoach: true,\n            aauNumber: parent.aauNumber || 'N/A',\n            role: parent.role || 'coach',\n            players: parent.players || [],\n            createdAt: parent.createdAt || new Date().toISOString(),\n          })\n        );\n\n      setCoaches(coachData);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : 'Failed to fetch coach data'\n      );\n      console.error('Error fetching coach data:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentUser, parents, fetchParentsData]);\n\n  useEffect(() => {\n    if (coaches.length === 0) {\n      fetchData();\n    }\n  }, [fetchData, coaches.length]);\n\n  return {\n    loading,\n    error,\n    coaches,\n    coachData: coaches.map(transformToExtendedRecord),\n    fetchData,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}